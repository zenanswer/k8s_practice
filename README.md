# Deploying a jhipster generated microservices on k8s

<img src="https://kubernetes.io/images/nav_logo.svg" height="64", style="background-color:#000000">

<img src="https://avatars1.githubusercontent.com/u/6059488?s=200&v=4" height="32">

# File structure

```text
.
|-- k8s_infrastructure
|   |-- calico.v3.9.yaml
|   |-- cephfs
|   |   |-- ceph-admin-secret.yaml
|   |   |-- ceph-deploy-ceph.log
|   |   |-- cephfs-pv-01.yaml
|   |   |-- cephfs-pv-02.yaml
|   |   |-- ceph-rbd-storageclass.yaml
|   |   `-- ceph-rbd-test-pod.yaml
|   |-- k8s-init-57.yaml
|   |-- k8s-init.yaml
|   |-- metallb-layer2-config.yaml
|   `-- metallb.v0.8.1.yaml
`-- k8s_jhipster                        #k8s deployment scripts be generated by [jhipster](https://www.jhipster.tech/)
    |-- app1
    |-- app2
    |-- console
    |-- gateway
    |-- kubectl-apply.sh
    |-- namespace.yml
    |-- README.md
    |-- registry
    `-- uaa
```

About the k8s deployment scripts you can find them in my other github repo [jhipster_microservice_practice](https://github.com/zenanswer/jhipster_microservice_practice).

I have to modify them because of some reasons below:

```text
[root@k8s01 k8s_practice]# diff -r ~/project/k8s/ k8s_jhipster/
Only in /root/project/k8s/: .yo-rc.json
diff -r /root/project/k8s/app1/app1-deployment.yml k8s_jhipster/app1/app1-deployment.yml
34a35,36
>       imagePullSecrets:
>         - name: regcred
diff -r /root/project/k8s/app2/app2-deployment.yml k8s_jhipster/app2/app2-deployment.yml
34a35,36
>       imagePullSecrets:
>         - name: regcred
diff -r /root/project/k8s/console/jhipster-elasticsearch.yml k8s_jhipster/console/jhipster-elasticsearch.yml
28a29,31
>   selector:
>     matchLabels:
>       component: jhipster-elasticsearch
174a178,180
>   selector:
>     matchLabels:
>       component: jhipster-elasticsearch
diff -r /root/project/k8s/gateway/gateway-deployment.yml k8s_jhipster/gateway/gateway-deployment.yml
34a35,36
>       imagePullSecrets:
>         - name: regcred
diff -r /root/project/k8s/registry/jhipster-registry.yml k8s_jhipster/registry/jhipster-registry.yml
33a34
>   type: LoadBalancer
37c38
<   clusterIP: None
---
> #  clusterIP: None
diff -r /root/project/k8s/uaa/uaa-deployment.yml k8s_jhipster/uaa/uaa-deployment.yml
34a35,36
>       imagePullSecrets:
>         - name: regcred
[root@k8s01 k8s_practice]#
```

